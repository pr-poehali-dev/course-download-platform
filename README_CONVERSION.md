# üîÑ RAR ‚Üí ZIP –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–ª—è –ø—Ä–µ–≤—å—é

## üìå –ü—Ä–æ–±–ª–µ–º–∞

–í –ø—Ä–æ–µ–∫—Ç–µ **485 –∏–∑ 487 —Ä–∞–±–æ—Ç** —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ RAR. Cloud Functions –Ω–µ –º–æ–≥—É—Ç —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å RAR –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —É—Ç–∏–ª–∏—Ç, –ø–æ—ç—Ç–æ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ RAR –∞—Ä—Ö–∏–≤—ã –≤ ZIP –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ, –∑–∞—Ç–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ–±–ª–∞–∫–æ.

---

## üìÅ –§–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `convert_rar_to_zip.py` | –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ |
| `convert_rar_batch.py` | –í–µ—Ä—Å–∏—è —Å –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ) |
| `QUICK_START.md` | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç |
| `CONVERSION_GUIDE.md` | –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install boto3 rarfile psycopg2-binary tqdm
```

**MacOS:**
```bash
brew install unrar
```

**Ubuntu:**
```bash
sudo apt-get install unrar
```

**Windows:**  
–°–∫–∞—á–∞–π WinRAR: https://www.win-rar.com/download.html

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–û—Ç–∫—Ä–æ–π `convert_rar_to_zip.py`:

```python
YANDEX_S3_KEY_ID = "—Ç–≤–æ–π_–∫–ª—é—á"
YANDEX_S3_SECRET_KEY = "—Ç–≤–æ–π_—Å–µ–∫—Ä–µ—Ç"
DATABASE_URL = "postgresql://user:pass@host:5432/db"
```

### 3. –ó–∞–ø—É—Å–∫

```bash
python convert_rar_to_zip.py
```

### 4. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é

–ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –æ—Ç–∫—Ä–æ–π –Ω–∞ —Å–∞–π—Ç–µ: `/extract-previews`

---

## ‚è±Ô∏è –í—Ä–µ–º—è –∏ —Ä–µ—Å—É—Ä—Å—ã

- **–í—Ä–µ–º—è:** ~15-20 –º–∏–Ω—É—Ç –¥–ª—è 485 —Ñ–∞–π–ª–æ–≤
- **–°–∫–æ—Ä–æ—Å—Ç—å:** ~1.5-2 —Å–µ–∫ –Ω–∞ —Ñ–∞–π–ª
- **–¢—Ä–∞—Ñ–∏–∫:** ~3-4 –ì–ë —Å–∫–∞—á–∞—Ç—å + –∑–∞–≥—Ä—É–∑–∏—Ç—å
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –°—Ç–∞–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç, ~5 –ì–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ RAR —Ñ–∞–π–ª—ã **–ù–ï —É–¥–∞–ª—è—é—Ç—Å—è**
- ‚úÖ ZIP —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä—è–¥–æ–º (`file.rar` ‚Üí `file.zip`)
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–µ—Ä–≤–∞—Ç—å (Ctrl+C) –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
- ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

---

## üéØ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

1. –°–∫—Ä–∏–ø—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ S3 –∏ –ë–î
2. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ä–∞–±–æ—Ç—ã —Å RAR –±–µ–∑ –ø—Ä–µ–≤—å—é (485 —à—Ç)
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:
   - –°–∫–∞—á–∏–≤–∞–µ—Ç RAR –∏–∑ –æ–±–ª–∞–∫–∞
   - –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∏ —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –≤ ZIP
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç ZIP –æ–±—Ä–∞—Ç–Ω–æ
   - –û–±–Ω–æ–≤–ª—è–µ—Ç `download_url` –≤ –ë–î
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üöÄ –ó–∞–ø—É—Å–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ RAR ‚Üí ZIP
============================================================
üì¶ –ù–∞–π–¥–µ–Ω–æ RAR –∞—Ä—Ö–∏–≤–æ–≤: 485

‚ö†Ô∏è  –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å 485 —Ñ–∞–π–ª–æ–≤? (yes/no): yes

üîÑ –ù–∞—á–∏–Ω–∞—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é...

–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 485/485 [15:23<00:00, 1.90—Å/—Ñ–∞–π–ª]

============================================================
üìä –ò–¢–û–ì–ò –ö–û–ù–í–ï–†–¢–ê–¶–ò–ò
============================================================
‚úÖ –£—Å–ø–µ—à–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: 483 –∏–∑ 485
‚ùå –û—à–∏–±–æ–∫: 2

üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –Ω–∞ /extract-previews
```

---

## üîÑ –ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```sql
SELECT 
  COUNT(*) FILTER (WHERE download_url LIKE '%.rar') as rar_count,
  COUNT(*) FILTER (WHERE download_url LIKE '%.zip') as zip_count
FROM works 
WHERE preview_image_url IS NULL;
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
rar_count: 0-2
zip_count: 483-485
```

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é

1. –û—Ç–∫—Ä–æ–π `/extract-previews`
2. –ù–∞–∂–º–∏ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é"
3. –ù–∞–±–ª—é–¥–∞–π –ø—Ä–æ–≥—Ä–µ—Å—Å (3-5 –º–∏–Ω—É—Ç)
4. –ì–æ—Ç–æ–≤–æ! –í—Å–µ —Ä–∞–±–æ—Ç—ã –ø–æ–ª—É—á–∞—Ç –ø—Ä–µ–≤—å—é

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Cannot find working tool
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω unrar  
**–†–µ—à–µ–Ω–∏–µ:** `brew install unrar` (Mac) –∏–ª–∏ `apt-get install unrar` (Linux)

### Access Denied
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–µ S3 credentials  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å KEY_ID –∏ SECRET_KEY –≤ Yandex Cloud

### Connection refused
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π DATABASE_URL  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è PostgreSQL

### –°–∫—Ä–∏–ø—Ç –∑–∞–≤–∏—Å
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª  
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∏ –∏–ª–∏ –Ω–∞–∂–º–∏ Ctrl+C (–±–µ–∑–æ–ø–∞—Å–Ω–æ)

---

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
–ò—Å–ø–æ–ª—å–∑—É–π `convert_rar_batch.py` - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ 50 —Ñ–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑ (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
1. –°–∫–∞—á–∞–π RAR –∏–∑ –æ–±–ª–∞–∫–∞ –≤—Ä—É—á–Ω—É—é
2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π –ª–æ–∫–∞–ª—å–Ω–æ (WinRAR, 7-Zip)
3. –ó–∞–≥—Ä—É–∑–∏ ZIP –æ–±—Ä–∞—Ç–Ω–æ
4. –û–±–Ω–æ–≤–∏ `download_url` –≤ –ë–î

### –í–∞—Ä–∏–∞–Ω—Ç 3: Docker —Å–µ—Ä–≤–∏—Å
–°–æ–∑–¥–∞–π –æ—Ç–¥–µ–ª—å–Ω—ã–π Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å unrar –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Ä–∞–±–æ—Ç –±–µ–∑ –ø—Ä–µ–≤—å—é:** 487
- **RAR –∞—Ä—Ö–∏–≤–æ–≤:** 485 (99.6%)
- **ZIP –∞—Ä—Ö–∏–≤–æ–≤:** 0
- **PNG —Ñ–∞–π–ª–æ–≤:** 1
- **–ü—Ä–æ—á–∏–µ:** 1

**–ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:**
- ZIP –∞—Ä—Ö–∏–≤–æ–≤: 483-485
- –í—Å–µ —Å–º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–≤—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ó–∞–ø—É—Å–∫–∞–π –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è** - —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—ë—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ S3
2. **–ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–º
3. **–ù–µ –∑–∞–∫—Ä—ã–≤–∞–π —Ç–µ—Ä–º–∏–Ω–∞–ª** - –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–π–º—ë—Ç ~20 –º–∏–Ω—É—Ç
4. **–°–¥–µ–ª–∞–π –±—ç–∫–∞–ø –ë–î** - –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π (—Ö–æ—Ç—è —Å–∫—Ä–∏–ø—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω)

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏–ª Python –ø–∞–∫–µ—Ç—ã
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏–ª unrar
- [ ] –ó–∞–ø–æ–ª–Ω–∏–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ S3 –∏ –ë–î
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é
- [ ] –î–æ–∂–¥–∞–ª—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –Ω–∞ `/extract-previews`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —á—Ç–æ –ø—Ä–µ–≤—å—é –ø–æ—è–≤–∏–ª–∏—Å—å

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞—Ç—å –ø—Ä–µ–≤—å—é –∏–∑ –≤—Å–µ—Ö –∞—Ä—Ö–∏–≤–æ–≤ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫! üöÄ

**–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏ –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –≤ `CONVERSION_GUIDE.md`
