# üì¶ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ RAR ‚Üí ZIP

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç 485 RAR –∞—Ä—Ö–∏–≤–æ–≤ –≤ ZIP —Ñ–æ—Ä–º–∞—Ç, —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –º–æ–≥–ª–∞ –∏–∑–≤–ª–µ–∫–∞—Ç—å –∏–∑ –Ω–∏—Ö –ø—Ä–µ–≤—å—é.

---

## üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Yandex Object Storage –∏ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ä–∞–±–æ—Ç—ã —Å RAR —Ñ–∞–π–ª–∞–º–∏ –±–µ–∑ –ø—Ä–µ–≤—å—é (485 —à—Ç)
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:
   - –°–∫–∞—á–∏–≤–∞–µ—Ç RAR –∏–∑ –æ–±–ª–∞–∫–∞
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ ZIP (–±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö)
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç ZIP –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ–±–ª–∞–∫–æ
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Python –ø–∞–∫–µ—Ç—ã
–£—Å—Ç–∞–Ω–æ–≤–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```bash
pip install boto3 rarfile psycopg2-binary tqdm
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
RAR —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω—é—é —É—Ç–∏–ª–∏—Ç—É –¥–ª—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏. –£—Å—Ç–∞–Ω–æ–≤–∏ –æ–¥–Ω—É –∏–∑:

**MacOS:**
```bash
brew install unrar
```

**Ubuntu/Debian:**
```bash
sudo apt-get install unrar
```

**Windows:**
1. –°–∫–∞—á–∞–π WinRAR: https://www.win-rar.com/download.html
2. –î–æ–±–∞–≤—å –≤ PATH: `C:\Program Files\WinRAR\`

### –ü—Ä–æ–≤–µ—Ä—å —É—Å—Ç–∞–Ω–æ–≤–∫—É:
```bash
unrar --version
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `convert_rar_to_zip.py` –∏ –∑–∞–ø–æ–ª–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –Ω–∞—á–∞–ª–µ:

```python
# YANDEX S3 credentials
YANDEX_S3_KEY_ID = "—Ç–≤–æ–π_–∫–ª—é—á"
YANDEX_S3_SECRET_KEY = "—Ç–≤–æ–π_—Å–µ–∫—Ä–µ—Ç"

# Database connection
DATABASE_URL = "postgresql://user:password@host:port/database"
```

### –ì–¥–µ –≤–∑—è—Ç—å –¥–∞–Ω–Ω—ã–µ?

#### 1. **Yandex S3 credentials:**
- –ó–∞–π–¥–∏ –≤ Yandex Cloud Console
- –ü–µ—Ä–µ–π–¥–∏ –≤ —Å–µ—Ä–≤–∏—Å Object Storage
- –°–æ–∑–¥–∞–π —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç (–µ—Å–ª–∏ –Ω–µ—Ç)
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞
- –°–∫–æ–ø–∏—Ä—É–π `Key ID` –∏ `Secret Key`

#### 2. **DATABASE_URL:**
–§–æ—Ä–º–∞—Ç: `postgresql://username:password@host:port/dbname`

–ü—Ä–∏–º–µ—Ä:
```
postgresql://admin:mypass123@postgres.example.com:5432/techforma
```

---

## üöÄ –ó–∞–ø—É—Å–∫

1. **–ü—Ä–æ–≤–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
python convert_rar_to_zip.py
```
–ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã, —É–≤–∏–¥–∏—à—å –æ—à–∏–±–∫—É.

2. **–ó–∞–ø—É—Å—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é:**
```bash
python convert_rar_to_zip.py
```

3. **–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ –∑–∞–ø—É—Å–∫:**
```
üì¶ –ù–∞–π–¥–µ–Ω–æ RAR –∞—Ä—Ö–∏–≤–æ–≤: 485
‚ö†Ô∏è  –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å 485 —Ñ–∞–π–ª–æ–≤? (yes/no):
```
–í–≤–µ–¥–∏ `yes`

4. **–ñ–¥–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
```
–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 485/485 [12:34<00:00, 1.55—Å–µ–∫/—Ñ–∞–π–ª]
```

---

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üöÄ –ó–∞–ø—É—Å–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ RAR ‚Üí ZIP
============================================================
üì¶ –ù–∞–π–¥–µ–Ω–æ RAR –∞—Ä—Ö–∏–≤–æ–≤: 485

‚ö†Ô∏è  –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å 485 —Ñ–∞–π–ª–æ–≤? (yes/no): yes

üîÑ –ù–∞—á–∏–Ω–∞—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é...

–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 485/485 [15:23<00:00, 1.90—Å/—Ñ–∞–π–ª]

============================================================
üìä –ò–¢–û–ì–ò –ö–û–ù–í–ï–†–¢–ê–¶–ò–ò
============================================================
‚úÖ –£—Å–ø–µ—à–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: 483 –∏–∑ 485
‚ùå –û—à–∏–±–æ–∫: 2

üîç –ü–µ—Ä–≤—ã–µ 10 –æ—à–∏–±–æ–∫:
   - Work 4521: File is corrupted
   - Work 4522: Cannot read archive header

üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –Ω–∞ /extract-previews
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ RAR —Ñ–∞–π–ª—ã **–ù–ï —É–¥–∞–ª—è—é—Ç—Å—è**
- ‚úÖ ZIP —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä—è–¥–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: `file.rar` ‚Üí `file.zip`)
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–µ—Ä–≤–∞—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç (Ctrl+C)
- ‚úÖ –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚è±Ô∏è –í—Ä–µ–º—è: ~1.5-2 —Å–µ–∫ –Ω–∞ —Ñ–∞–π–ª
- ‚è±Ô∏è –í—Å–µ–≥–æ: ~15-20 –º–∏–Ω—É—Ç –¥–ª—è 485 —Ñ–∞–π–ª–æ–≤
- üíæ –¢—Ä–∞—Ñ–∏–∫: —Å–∫–∞—á–∞–µ—Ç ~2-3 –ì–ë, –∑–∞–≥—Ä—É–∑–∏—Ç ~2-3 –ì–ë
- üåê –¢—Ä–µ–±—É–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã —Å–ª–æ–º–∞–Ω—ã:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã
- –í –∫–æ–Ω—Ü–µ –≤—ã–≤–æ–¥–∏—Ç –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç

---

## üîÑ –ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

1. **–ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```bash
# –í SQL –∑–∞–ø—Ä–æ—Å–µ
SELECT 
  COUNT(*) FILTER (WHERE download_url LIKE '%.rar') as rar_count,
  COUNT(*) FILTER (WHERE download_url LIKE '%.zip') as zip_count
FROM works 
WHERE preview_image_url IS NULL;
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
```
rar_count: 0-2 (—Ç–æ–ª—å–∫–æ —Å–ª–æ–º–∞–Ω–Ω—ã–µ)
zip_count: 483-485
```

2. **–ó–∞–ø—É—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é:**
- –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç: `/extract-previews`
- –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É "–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é"
- –ñ–¥–∏ 3-5 –º–∏–Ω—É—Ç
- –í—Å–µ 485 —Ä–∞–±–æ—Ç –ø–æ–ª—É—á–∞—Ç –ø—Ä–µ–≤—å—é!

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "Cannot find working tool"
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω unrar  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏ unrar (—Å–º. —Ä–∞–∑–¥–µ–ª "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è")

### "Access Denied"
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–µ S3 credentials  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å KEY_ID –∏ SECRET_KEY

### "Connection refused"
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π DATABASE_URL  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å —Ö–æ—Å—Ç, –ø–æ—Ä—Ç, –ø–∞—Ä–æ–ª—å

### "Memory error"
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –ø–æ –æ–¥–Ω–æ–º—É, –Ω–æ –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞:
```python
# –î–æ–±–∞–≤—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
MAX_FILE_SIZE = 100 * 1024 * 1024  # 100 MB
```

### –°–∫—Ä–∏–ø—Ç –∑–∞–≤–∏—Å
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –î–æ–ª–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ñ–∞–π–ª  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∏ –∏–ª–∏ –Ω–∞–∂–º–∏ Ctrl+C –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ (–±–µ–∑–æ–ø–∞—Å–Ω–æ)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å —É—Å—Ç–∞–Ω–æ–≤–∫—É unrar
3. –ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ–ª–Ω—ã–π –ª–æ–≥ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Ü–µ
4. –ù–∞–ø–∏—à–∏ –º–Ω–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤—Å–µ RAR —Å—Ç–∞–Ω—É—Ç ZIP, –∏ —Å–∏—Å—Ç–µ–º–∞ —Å–º–æ–∂–µ—Ç:
- ‚úÖ –ò–∑–≤–ª–µ–∫–∞—Ç—å –ø—Ä–µ–≤—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –ª–µ—Ç—É
- ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ó–∞–ø—É—Å–∫–∞–π —Å–∫—Ä–∏–ø—Ç –∏ —á–µ—Ä–µ–∑ 20 –º–∏–Ω—É—Ç –≤—Å—ë –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ!** üöÄ
