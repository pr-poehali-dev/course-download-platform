# üöÄ –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ö–∞—Å—Å—ã

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. Backend —Ñ—É–Ω–∫—Ü–∏—è (backend/payment/index.py)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ cloud function –Ω–∞ Python 3.11
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¢–∏–Ω—å–∫–æ—Ñ—Ñ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤ (—á–µ—Ä–µ–∑ logging.Logger)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ CORS –∏ OPTIONS –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ Webhook handler –¥–ª—è –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–ª–ª–æ–≤
- ‚úÖ 5 –ø–∞–∫–µ—Ç–æ–≤ –±–∞–ª–ª–æ–≤: 50, 100, 200, 500, 1000
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞: deployment ID 307c84c6

### 2. Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ PaymentDialog.tsx - –¥–∏–∞–ª–æ–≥ –ø–æ–∫—É–ø–∫–∏ –±–∞–ª–ª–æ–≤
- ‚úÖ BuyPointsPage.tsx - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫—É–ø–∫–∏
- ‚úÖ PaymentSuccessPage.tsx - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—Ö–∞
- ‚úÖ PaymentFailedPage.tsx - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏

### 3. –¢–µ—Å—Ç–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
–°–æ–∑–¥–∞–Ω—ã 4 —Ñ–∞–π–ª–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **simple-test.html** ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–Æ
   - –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Üí –∫–Ω–æ–ø–∫–∞ ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç
   
2. **test-payment.html**
   - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ó–∞–ø—É—Å–∫ 1 –∏–ª–∏ 10 —Ç–µ—Å—Ç–æ–≤ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
   
3. **run-10-tests.py**
   - Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ó–∞–ø—É—Å–∫: `python3 run-10-tests.py`
   
4. **test-token-generation.py**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞
   - –ó–∞–ø—É—Å–∫: `python3 test-token-generation.py`

### 4. –°–µ–∫—Ä–µ—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ TINKOFF_TERMINAL_KEY = 1763583059270DEMO
- ‚úÖ TINKOFF_PASSWORD = Isvm4_ae1lIiD9RM
- ‚úÖ DATABASE_URL (–¥–ª—è –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–ª–ª–æ–≤)

## üî¥ –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞ 204: "–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω"**

–¢–∏–Ω—å–∫–æ—Ñ—Ñ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "Success": false,
  "ErrorCode": "204",
  "Message": "–ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.",
  "Details": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä—É TerminalKey/SecretKey."
}
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **"–ü–∞—Ä–æ–ª—å" ‚â† "SecretKey"**
   - –í –∞–¥–º–∏–Ω–∫–µ –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ø–æ–∫–∞–∑–∞–Ω–æ –ø–æ–ª–µ "–ü–∞—Ä–æ–ª—å": `Isvm4_ae1lIiD9RM`
   - –ù–û –¥–ª—è API –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π "–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á" (Secret Key)
   - –≠—Ç–æ —Ä–∞–∑–Ω—ã–µ –ø–æ–ª—è!

2. **–î–µ–º–æ-—Ç–µ—Ä–º–∏–Ω–∞–ª**
   - –î–ª—è –¥–µ–º–æ-—Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π: `wvchd3k3ju9vms5e`

3. **–¢–µ—Ä–º–∏–Ω–∞–ª –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω**
   - –î–µ–º–æ-—Ç–µ—Ä–º–∏–Ω–∞–ª –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è

### –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials –≤ –¢–∏–Ω—å–∫–æ—Ñ—Ñ ‚ö†Ô∏è –í–ê–ñ–ù–û

–ó–∞–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ö–∞—Å—Å—ã –∏ –Ω–∞–π–¥–∏—Ç–µ:

1. **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (Secret Key)** - –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –æ—Ç "–ü–∞—Ä–æ–ª—è"
2. **–ü–∞—Ä–æ–ª—å –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞** - –¥–ª—è –¥–µ–º–æ –æ–±—ã—á–Ω–æ `wvchd3k3ju9vms5e`

–°–∫—Ä–∏–Ω—à–æ—Ç –≥–¥–µ –∏—Å–∫–∞—Ç—å:
- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
- –ò—â–∏—Ç–µ –ø–æ–ª–µ "–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è API" –∏–ª–∏ "Secret Key"

### –®–ê–ì 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `simple-test.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂"
3. –ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–í–∞—Ä–∏–∞–Ω—Ç B: Python —Ç–µ—Å—Ç**
```bash
python3 run-10-tests.py
```

### –®–ê–ì 3: –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–∞–º, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å:
```
TINKOFF_PASSWORD = wvchd3k3ju9vms5e
```

### –®–ê–ì 4: –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏

–ü–æ—Å–ª–µ –ª—é–±–æ–≥–æ —Ç–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
- –í poehali.dev ‚Üí –õ–æ–≥–∏ backend/payment
- –¢–∞–º –±—É–¥—É—Ç –¥–µ—Ç–∞–ª–∏:
  - –ö–∞–∫–æ–π —Ç–æ–∫–µ–Ω —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
  - –ö–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
  - –ö–∞–∫–æ–π –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω

## üìä –ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å—Ç—Ä–æ–≥–æ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

```python
# 1. –ë–µ—Ä–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (TerminalKey, Amount, OrderId)
# 2. –î–æ–±–∞–≤–ª—è–µ–º Password
# 3. –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∫–ª—é—á–∞–º –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ: ['Amount', 'OrderId', 'Password', 'TerminalKey']
# 4. –ö–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è: "100000order_123Isvm4_ae1lIiD9RM1763583059270DEMO"
# 5. SHA256 hash
```

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ì–õ–ê–í–ù–û–ï**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –µ—Å—Ç—å –ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ "–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á" –≤ –¢–∏–Ω—å–∫–æ—Ñ—Ñ –∞–¥–º–∏–Ω–∫–µ
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π demo –ø–∞—Ä–æ–ª—å: `wvchd3k3ju9vms5e`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `simple-test.html` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
4. –ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç - —è –ø–æ—Å–º–æ—Ç—Ä—é –ª–æ–≥–∏ –∏ –Ω–∞–π–¥—É —Ç–æ—á–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¢–∏–Ω—å–∫–æ—Ñ—Ñ

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
- –¢–µ–ª–µ—Ñ–æ–Ω: 8 800 555-777-8
- Email: ecom@tinkoff.ru
- –í–æ–ø—Ä–æ—Å: "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å SecretKey –¥–ª—è –¥–µ–º–æ-—Ç–µ—Ä–º–∏–Ω–∞–ª–∞?"

---

**Deployment ID**: 307c84c6-fbc9-47e8-bf6b-0a714484355c  
**Function URL**: https://functions.poehali.dev/4b9b82b8-34d8-43e7-a9ac-c3cb0bd67fb1  
**Status**: –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –∂–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SecretKey
