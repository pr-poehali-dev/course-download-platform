# üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ü–û–î–ì–û–¢–û–í–ö–ï –ö –ó–ê–ü–£–°–ö–£

–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## 1. üíæ –†–ï–ó–ï–†–í–ù–û–ï –ö–û–ü–ò–†–û–í–ê–ù–ò–ï –ë–ê–ó–´ –î–ê–ù–ù–´–•

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ —Ç–≤–æ—è –ë–î PostgreSQL —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–∞ –≤ –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–µ (Managed Service for PostgreSQL):

**–®–∞–≥ 1:** –ó–∞–π–¥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–æ
- –ü–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª **Managed Service for PostgreSQL**
- –ù–∞–π–¥–∏ —Å–≤–æ—é –ë–î `t_p63326274_course_download_plat`

**–®–∞–≥ 2:** –ù–∞—Å—Ç—Ä–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏:
- –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ: –î–ê
- –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: 03:00 (–Ω–æ—á—å)
- –•—Ä–∞–Ω–∏—Ç—å –∫–æ–ø–∏–∏: 7 –¥–Ω–µ–π (–º–∏–Ω–∏–º—É–º)
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ: –î–ê
```

**–°—Ç–æ–∏–º–æ—Å—Ç—å:** –û–±—ã—á–Ω–æ –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å managed –ë–î

---

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –†—É—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ pg_dump

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π PostgreSQL:

**–°–æ–∑–¥–∞–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:**

```bash
#!/bin/bash
# backup_db.sh

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
DB_NAME="t_p63326274_course_download_plat"
BACKUP_DIR="/backups/postgres"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="$BACKUP_DIR/backup_$DATE.sql.gz"

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
mkdir -p $BACKUP_DIR

# –í—ã–ø–æ–ª–Ω–∏—Ç—å backup (DATABASE_URL –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è)
pg_dump $DATABASE_URL | gzip > $BACKUP_FILE

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
find $BACKUP_DIR -name "backup_*.sql.gz" -mtime +7 -delete

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
echo "$(date): Backup created: $BACKUP_FILE" >> /var/log/postgres_backup.log
```

**–°–¥–µ–ª–∞–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:**
```bash
chmod +x backup_db.sh
```

**–ù–∞—Å—Ç—Ä–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ cron:**
```bash
# –û—Ç–∫—Ä–æ–π crontab
crontab -e

# –î–æ–±–∞–≤—å —Å—Ç—Ä–æ–∫—É (–∑–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00 –Ω–æ—á–∏)
0 3 * * * /path/to/backup_db.sh
```

**–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
./backup_db.sh
ls -lh /backups/postgres/
```

---

### –í–∞—Ä–∏–∞–Ω—Ç –í: –û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –±—ç–∫–∞–ø–æ–≤ (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ)

–î–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏ –±—ç–∫–∞–ø—ã –≤ –æ–±–ª–∞–∫–µ (–Ø–Ω–¥–µ–∫—Å Object Storage, AWS S3):

```bash
#!/bin/bash
# backup_to_s3.sh

DB_NAME="t_p63326274_course_download_plat"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="/tmp/backup_$DATE.sql.gz"
S3_BUCKET="s3://your-bucket-name/postgres-backups/"

# –°–æ–∑–¥–∞—Ç—å backup
pg_dump $DATABASE_URL | gzip > $BACKUP_FILE

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ S3 (–Ω—É–∂–µ–Ω aws-cli –∏–ª–∏ s3cmd)
aws s3 cp $BACKUP_FILE $S3_BUCKET

# –£–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
rm $BACKUP_FILE

echo "$(date): Backup uploaded to S3" >> /var/log/postgres_backup.log
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ aws-cli:**
```bash
pip install awscli
aws configure  # –≤–≤–µ–¥–∏ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞
```

---

## 2. üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –í–∞—Ä–∏–∞–Ω—Ç –ê: Sentry (–¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫) - –ë–ï–°–ü–õ–ê–¢–ù–û

**–®–∞–≥ 1:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Sentry
1. –ó–∞–π–¥–∏ –Ω–∞ https://sentry.io
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–æ 5000 —Å–æ–±—ã—Ç–∏–π/–º–µ—Å—è—Ü)
3. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç ‚Üí –≤—ã–±–µ—Ä–∏ **React**
4. –°–∫–æ–ø–∏—Ä—É–π DSN (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://xxx@yyy.ingest.sentry.io/zzz`)

**–®–∞–≥ 2:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Sentry –≤ –ø—Ä–æ–µ–∫—Ç

```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
bun add @sentry/react
```

**–®–∞–≥ 3:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ frontend

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/lib/sentry.ts`:
```typescript
import * as Sentry from "@sentry/react";

export function initSentry() {
  Sentry.init({
    dsn: "–í–ê–®_SENTRY_DSN_–°–Æ–î–ê",
    environment: import.meta.env.MODE,
    integrations: [
      Sentry.browserTracingIntegration(),
      Sentry.replayIntegration({
        maskAllText: false,
        blockAllMedia: false,
      }),
    ],
    tracesSampleRate: 0.1, // 10% —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
    replaysSessionSampleRate: 0.1, // 10% —Å–µ—Å—Å–∏–π
    replaysOnErrorSampleRate: 1.0, // 100% –æ—à–∏–±–æ–∫
  });
}
```

–î–æ–±–∞–≤—å –≤ `src/main.tsx`:
```typescript
import { initSentry } from './lib/sentry';

// –í —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ, –¥–æ —Ä–µ–Ω–¥–µ—Ä–∞
if (import.meta.env.PROD) {
  initSentry();
}
```

**–®–∞–≥ 4:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ backend (Python —Ñ—É–Ω–∫—Ü–∏–∏)

–î–æ–±–∞–≤—å –≤ `requirements.txt` –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:
```
sentry-sdk==1.40.0
```

–í –Ω–∞—á–∞–ª–æ `index.py`:
```python
import sentry_sdk
import os

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Sentry
sentry_sdk.init(
    dsn=os.environ.get('SENTRY_DSN'),
    environment='production',
    traces_sample_rate=0.1
)
```

**–®–∞–≥ 5:** –î–æ–±–∞–≤—å SENTRY_DSN –≤ secrets
```bash
# –í poehali.dev –¥–æ–±–∞–≤—å —Å–µ–∫—Ä–µ—Ç:
# –ù–∞–∑–≤–∞–Ω–∏–µ: SENTRY_DSN
# –ó–Ω–∞—á–µ–Ω–∏–µ: —Ç–≤–æ–π DSN –∏–∑ Sentry
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Sentry!

---

### –í–∞—Ä–∏–∞–Ω—Ç –ë: UptimeRobot (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞) - –ë–ï–°–ü–õ–ê–¢–ù–û

**–®–∞–≥ 1:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
1. –ó–∞–π–¥–∏ –Ω–∞ https://uptimerobot.com
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 50 –º–æ–Ω–∏—Ç–æ—Ä–æ–≤)

**–®–∞–≥ 2:** –°–æ–∑–¥–∞–π –º–æ–Ω–∏—Ç–æ—Ä—ã
```
+ Add New Monitor

Monitor Type: HTTPS
Friendly Name: Tech Forma - –ì–ª–∞–≤–Ω–∞—è
URL: https://techforma.pro
Monitoring Interval: 5 –º–∏–Ω—É—Ç (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
```

**–°–æ–∑–¥–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–æ–≤:**
- ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: `https://techforma.pro`
- ‚úÖ API auth: `https://functions.poehali.dev/48e96862-17ab-4f46-a6b8-f123b2e32e46?action=verify`
- ‚úÖ –ö–∞—Ç–∞–ª–æ–≥: `https://techforma.pro/catalog`
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: endpoint –¥–ª—è healthcheck (—Å–æ–∑–¥–∞–¥–∏–º –Ω–∏–∂–µ)

**–®–∞–≥ 3:** –ù–∞—Å—Ç—Ä–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```
Alert Contacts:
- Email: —Ç–≤–æ—è –ø–æ—á—Ç–∞
- Telegram: –ø–æ–¥–∫–ª—é—á–∏ –±–æ—Ç @UptimeRobot
- SMS: –µ—Å–ª–∏ –Ω—É–∂–Ω–æ (–ø–ª–∞—Ç–Ω–æ)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—É—á–∏—à—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –µ—Å–ª–∏ —Å–∞–π—Ç —É–ø–∞–ª!

---

### –í–∞—Ä–∏–∞–Ω—Ç –í: –ü—Ä–æ—Å—Ç–æ–π healthcheck endpoint

–°–æ–∑–¥–∞–π backend —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã:

**–°–æ–∑–¥–∞–π `/backend/healthcheck/index.py`:**
```python
import json
import os
import psycopg2
from datetime import datetime

def handler(event, context):
    '''
    Business: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
    Args: event, context
    Returns: —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    '''
    
    if event.get('httpMethod') == 'OPTIONS':
        return {
            'statusCode': 200,
            'headers': {
                'Access-Control-Allow-Origin': '*',
                'Access-Control-Allow-Methods': 'GET, OPTIONS',
                'Access-Control-Allow-Headers': 'Content-Type'
            },
            'body': '',
            'isBase64Encoded': False
        }
    
    health = {
        'status': 'healthy',
        'timestamp': datetime.utcnow().isoformat(),
        'components': {}
    }
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
    try:
        database_url = os.environ.get('DATABASE_URL')
        conn = psycopg2.connect(database_url, connect_timeout=5)
        cur = conn.cursor()
        cur.execute('SELECT 1')
        cur.close()
        conn.close()
        health['components']['database'] = 'healthy'
    except Exception as e:
        health['components']['database'] = f'unhealthy: {str(e)}'
        health['status'] = 'unhealthy'
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    required_vars = ['DATABASE_URL', 'JWT_SECRET']
    missing_vars = [v for v in required_vars if not os.environ.get(v)]
    if missing_vars:
        health['components']['env_vars'] = f'missing: {missing_vars}'
        health['status'] = 'unhealthy'
    else:
        health['components']['env_vars'] = 'healthy'
    
    status_code = 200 if health['status'] == 'healthy' else 503
    
    return {
        'statusCode': status_code,
        'headers': {
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*'
        },
        'body': json.dumps(health),
        'isBase64Encoded': False
    }
```

**–°–æ–∑–¥–∞–π `/backend/healthcheck/requirements.txt`:**
```
psycopg2-binary==2.9.9
```

**–°–æ–∑–¥–∞–π `/backend/healthcheck/tests.json`:**
```json
{
  "tests": [{
    "name": "Health check returns 200",
    "method": "GET",
    "path": "/",
    "expectedStatus": 200,
    "expectedBody": {
      "status": "healthy"
    },
    "bodyMatcher": "partial"
  }]
}
```

**–ó–∞–¥–µ–ø–ª–æ–π:**
```bash
# –Æ—Ä–∞ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ sync_backend
```

**–î–æ–±–∞–≤—å –≤ UptimeRobot:** `https://functions.poehali.dev/–•–•–•-healthcheck-url`

---

## 3. üî• –ù–ê–ì–†–£–ó–û–ß–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –í–∞—Ä–∏–∞–Ω—Ç –ê: k6 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) - –ë–ï–°–ü–õ–ê–¢–ù–û

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ k6:**
```bash
# macOS
brew install k6

# Linux
sudo apt-get install k6

# Windows
choco install k6
```

**–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `load-test.js`:**
```javascript
import http from 'k6/http';
import { check, sleep } from 'k6';

// –°—Ü–µ–Ω–∞—Ä–∏–π –Ω–∞–≥—Ä—É–∑–∫–∏
export const options = {
  stages: [
    { duration: '1m', target: 10 },   // –†–∞–∑–≥–æ–Ω –¥–æ 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    { duration: '3m', target: 50 },   // –£–¥–µ—Ä–∂–∞–Ω–∏–µ 50 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    { duration: '1m', target: 100 },  // –ü–∏–∫ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    { duration: '2m', target: 0 },    // –°–ø–∞–¥
  ],
  thresholds: {
    http_req_duration: ['p(95)<500'], // 95% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã—Å—Ç—Ä–µ–µ 500ms
    http_req_failed: ['rate<0.01'],   // –ú–µ–Ω—å—à–µ 1% –æ—à–∏–±–æ–∫
  },
};

const BASE_URL = 'https://techforma.pro';
const API_URL = 'https://functions.poehali.dev';

export default function () {
  // –¢–µ—Å—Ç 1: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
  let res = http.get(`${BASE_URL}/`);
  check(res, {
    '–≥–ª–∞–≤–Ω–∞—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞': (r) => r.status === 200,
    '–≥–ª–∞–≤–Ω–∞—è –±—ã—Å—Ç—Ä–∞—è': (r) => r.timings.duration < 1000,
  });
  sleep(1);

  // –¢–µ—Å—Ç 2: –ö–∞—Ç–∞–ª–æ–≥
  res = http.get(`${BASE_URL}/catalog`);
  check(res, {
    '–∫–∞—Ç–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∂–µ–Ω': (r) => r.status === 200,
  });
  sleep(2);

  // –¢–µ—Å—Ç 3: API - —Å–ø–∏—Å–æ–∫ —Ä–∞–±–æ—Ç
  res = http.get(`${API_URL}/a16a43fc-fa7d-4c72-ad15-ba566d2c7413`);
  check(res, {
    'API —Ä–∞–±–æ—Ç–∞–µ—Ç': (r) => r.status === 200,
    'API –±—ã—Å—Ç—Ä—ã–π': (r) => r.timings.duration < 300,
  });
  sleep(1);

  // –¢–µ—Å—Ç 4: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–Ω–µ –ª–æ–≥–∏–Ω–∏–º—Å—è, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º endpoint)
  res = http.options(`${API_URL}/48e96862-17ab-4f46-a6b8-f123b2e32e46?action=login`);
  check(res, {
    'auth endpoint –¥–æ—Å—Ç—É–ø–µ–Ω': (r) => r.status === 200,
  });
  sleep(1);
}
```

**–ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç:**
```bash
k6 run load-test.js
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫–∞–∂—É—Ç:**
```
‚úì –≥–ª–∞–≤–Ω–∞—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞.............: 100% 
‚úì API —Ä–∞–±–æ—Ç–∞–µ—Ç..................: 100%
‚úì API –±—ã—Å—Ç—Ä—ã–π...................: 95%

http_req_duration...............: avg=245ms  p(95)=450ms
http_req_failed.................: 0.2%
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- ‚úÖ –ó–µ–ª—ë–Ω—ã–µ –≥–∞–ª–æ—á–∫–∏ ‚Äî –≤—Å—ë –û–ö
- ‚ö†Ô∏è –ñ—ë–ª—Ç—ã–µ ‚Äî –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- ‚ùå –ö—Ä–∞—Å–Ω—ã–µ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

---

### –í–∞—Ä–∏–∞–Ω—Ç –ë: Apache Bench (–ø—Ä–æ—Å—Ç–æ–π)

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
# –û–±—ã—á–Ω–æ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
which ab

# –ï—Å–ª–∏ –Ω–µ—Ç - —É—Å—Ç–∞–Ω–æ–≤–∏ Apache
sudo apt-get install apache2-utils
```

**–¢–µ—Å—Ç –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
```bash
# 1000 –∑–∞–ø—Ä–æ—Å–æ–≤, 10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
ab -n 1000 -c 10 https://techforma.pro/

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# Requests per second: 45.23 [#/sec] - —Ö–æ—Ä–æ—à–æ
# Time per request: 221.2 [ms] - –æ—Ç–ª–∏—á–Ω–æ
# Failed requests: 0 - –∏–¥–µ–∞–ª—å–Ω–æ
```

**–¢–µ—Å—Ç API:**
```bash
ab -n 500 -c 20 https://functions.poehali.dev/48e96862-17ab-4f46-a6b8-f123b2e32e46?action=verify
```

---

### –í–∞—Ä–∏–∞–Ω—Ç –í: Loader.io (–æ–±–ª–∞—á–Ω—ã–π) - –ë–ï–°–ü–õ–ê–¢–ù–û

**–®–∞–≥ 1:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
1. –ó–∞–π–¥–∏ –Ω–∞ https://loader.io
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 10,000 –∫–ª–∏–µ–Ω—Ç–æ–≤)

**–®–∞–≥ 2:** –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–º–µ–Ω–∞
```
1. Loader.io –¥–∞—Å—Ç —Ç–µ–±–µ —Ç–æ–∫–µ–Ω: loaderio-xxx.txt
2. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª –≤ /public/loaderio-xxx.txt —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Ç–æ–∫–µ–Ω–∞
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç
4. –ü—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: https://techforma.pro/loaderio-xxx.txt
```

**–®–∞–≥ 3:** –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç
```
New Test:
- Target: https://techforma.pro
- Clients: 0 ‚Üí 100 (–∑–∞ 60 —Å–µ–∫—É–Ω–¥)
- Duration: 1 –º–∏–Ω—É—Ç–∞
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!

---

## 4. üìù –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
- [ ] –ë—ç–∫–∞–ø—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –º–∏–Ω–∏–º—É–º 7 –¥–Ω–µ–π
- [ ] –ë—ç–∫–∞–ø—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ (–Ω–µ –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ —á—Ç–æ –ë–î)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] Sentry –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è frontend –∏ backend
- [ ] UptimeRobot –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞
- [ ] Healthcheck endpoint —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (email/telegram)

### –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —Å 50+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] 95% –∑–∞–ø—Ä–æ—Å–æ–≤ < 500ms
- [ ] –û—à–∏–±–æ–∫ < 1%
- [ ] –ë–î —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] JWT_SECRET —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ production
- [ ] DATABASE_URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- [ ] HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö endpoints
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## 5. üö® –ß–¢–û –î–ï–õ–ê–¢–¨ –ï–°–õ–ò...

### –°–∞–π—Ç —É–ø–∞–ª
1. –ü—Ä–æ–≤–µ—Ä—å UptimeRobot - —á—Ç–æ –∏–º–µ–Ω–Ω–æ —É–ø–∞–ª–æ
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ Sentry
3. –ü—Ä–æ–≤–µ—Ä—å healthcheck endpoint
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –ë–î
2. –ü—Ä–æ–≤–µ—Ä—å –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞ –µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
1. –ü–æ—Å–º–æ—Ç—Ä–∏ –º–µ—Ç—Ä–∏–∫–∏ –≤ Sentry (Performance)
2. –ü—Ä–æ–≤–µ—Ä—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –ë–î
3. –ó–∞–ø—É—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç - –Ω–∞–π–¥–∏ —É–∑–∫–æ–µ –º–µ—Å—Ç–æ
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å—ã –∏–ª–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–π

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ üöÄ

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π - –ø–∏—à–∏!
